{% load verbatim %}
{% verbatim %}

<div id="createDatasheet">
	<div class="modal-header">
		<button type="button" class="close" ng-click="cancel()">&times;</button>
		<h3>Edit algorithm</h3>
	</div>
	<div class="modal-body">
		<div class="alert" ng-class="{'alert-success': alert.success, 'alert-danger': !alert.success}" ng-show="alert.show">
		<button type="button" class="close" ng-click="closeAlert()">&times;</button>
		<strong>{{alert.title}}</strong> {{alert.body}}
	</div>

		<div>
			<div class="control-group" ng-class="{'error': error.messages.id}">
				<label class="control-label">Id</label>
				<div class="controls">
					<select ng-options="id.name as id.value for id in algorithmId" ng-model="form.id"></select>
					<span class="help-inline">{{error.messages.id}}</span>
				</div>
			</div>
			<div class="control-group" ng-class="{'error': error.messages.alg_type}">
				<label class="control-label">Type</label>
				<div class="controls">
					<select ng-options="atype.name as atype.value for atype in algorithmType" ng-model="form.alg_type"></select>
					<span class="help-inline">{{error.messages.alg_type}}</span>
				</div>
			</div>
			<div ng-if="form.alg_type == 1" class="control-group" ng-class="{'error': error.messages.params}">
				<label for="inputDesc">Parameters</label>
				<div class="controls">
					<span>f(x)=</span>
					<input ng-model="form.a0" class="span1" type="text" />
					<span>+</span>
					<input ng-model="form.a1" class="span1" type="text" />
					<span>*x</span>
				</div>
				<span class="help-inline">{{error.messages.params}}</span>
			</div>
			<div ng-if="form.alg_type == 2" class="control-group" ng-class="{'error': error.messages.params}">
				<label for="inputDesc">Parameters</label>
				<div class="controls">
					<span>f(x)=</span>
					<input ng-model="form.a0" class="span1" type="text" />
					<span>+</span>
					<input ng-model="form.a1" class="span1" type="text" />
					<span>*x+</span>
					<input ng-model="form.a2" class="span1" type="text" />
					<span>*x^2</span>
				</div>
				<span class="help-inline">{{error.messages.params}}</span>
			</div>
			<div ng-if="form.alg_type == 3" class="control-group">
				<label for="inputDesc">Choose measurement data type</label>
				<div class="controls">
					<select class="span2" ng-options="atype.name as atype.value for atype in mdTypes" ng-model="form.mdType"></select>
				</div>
			</div>
			<div ng-if="form.alg_type == 3" class="control-group" ng-class="{'error': error.messages.params}">
				<label for="inputDesc">Choose current and field columns</label>
				<div class="controls">
					<select class="span2" ng-options="column for column in mdData[form.mdType]" ng-model="form.current"></select>
					<select class="span2" ng-options="column for column in mdData[form.mdType]" ng-model="form.field"></select>
				</div>
				<span class="help-inline">{{error.messages.params}}</span>
			</div>
			<div class="control-group" ng-class="{'error': error.messages.init}">
				<label for="inputDesc">Initial unit</label>
				<div class="controls">
					<select ng-options="unit.name as unit.value for unit in unitTypes" ng-model="form.init_unit"></select>
					<input ng-model="form.init_unit" class="span1" type="text" />
				</div>
				<span class="help-inline">{{error.messages.init}}</span>
			</div>
			<div class="control-group" ng-class="{'error': error.messages.dest}">
				<label for="inputDesc">Destination unit</label>
				<div class="controls">
					<select ng-options="unit.name as unit.value for unit in unitTypes" ng-model="form.dest_unit"></select>
					<input ng-model="form.dest_unit" class="span1" type="text" />
				</div>
				<span class="help-inline">{{error.messages.dest}}</span>
			</div>
			<input type="hidden" ng-mode="form.type"/>
			<input type="hidden" ng-mode="form.subtype"/>
		</div>

	</div>
	<div class="modal-footer">
		<button ng-if="showSaveButton" class="btn btn-info" ng-click="ok()">Add</button>
		<button ng-if="showCancelButton" class="btn btn-default" ng-click="cancel()">Cancel</button>
		<button ng-if="showFinishButton" class="btn btn-info" ng-click="finish()">Finish</button>
	</div>
</div>

{% endverbatim %}